{"ast":null,"code":"const LOAD_ALL_PRODUCTS_BY_CATEGORY = 'LOAD_ALL_PRODUCTS_BY_CATEGORY';\nconst LOAD_SINGLE_PRODUCT = 'LOAD_SINGLE_PRODUCT';\nconst SORT_PRODUCTS = \"SORT_PRODUCTS\";\nconst FILTER_PRODUCTS = \"FILTER_PRODUCTS\";\nconst DISCONTED_PRODUCTS = \"DISCONTED_PRODUCTS\";\nexport const loadProductsByCategoryAction = payload => ({\n  type: LOAD_ALL_PRODUCTS_BY_CATEGORY,\n  payload\n});\nexport const loadSingleProductAction = payload => ({\n  type: LOAD_SINGLE_PRODUCT,\n  payload\n});\nexport const sortByCategoryProductsAction = payload => ({\n  type: SORT_PRODUCTS,\n  payload\n});\nexport const filterByCategoryProductsAction = payload => ({\n  type: FILTER_PRODUCTS,\n  payload\n});\nexport const discontedByCategoryProductsAction = payload => ({\n  type: DISCONTED_PRODUCTS,\n  payload\n});\nconst filter = {\n  min: 0,\n  max: Infinity,\n  discont: false\n};\nexport const productsByCategoryReducer = (state = {}, action) => {\n  if (action.type === LOAD_ALL_PRODUCTS_BY_CATEGORY) {\n    const products = action.payload.data.map(el => ({\n      ...el,\n      show_product: true\n    }));\n    action.payload.data = products;\n    return action.payload;\n  } else if (action.type === SORT_PRODUCTS) {\n    if (action.payload === \"title\") {\n      state.data.sort((a, b) => a.title.localeCompare(b.title));\n    } else if (action.payload === \"price_asc\") {\n      state.data.sort((a, b) => a.price - b.price);\n    } else if (action.payload === \"price_desc\") {\n      state.data.sort((a, b) => b.price - a.price);\n    } else if (action.payload === \"default\") {\n      state.data.sort((a, b) => a.id - b.id);\n    }\n    return {\n      ...state\n    };\n  } else if (action.type === FILTER_PRODUCTS) {\n    const {\n      min_value,\n      max_value\n    } = action.payload;\n    filter.min_value = min_value;\n    filter.max_value = max_value;\n    const products = state.data.map(el => {\n      if (filter.discont) {\n        if (el.discont_price >= filter.min_value && el.discont_price <= filter.max_value) {\n          el.show_product = true;\n        } else {\n          el.show_product = false;\n        }\n      } else {\n        if (el.price >= min_value && el.price <= max_value) {\n          el.show_product = true;\n        } else {\n          el.show_product = false;\n        }\n      }\n      return el;\n    });\n    state.data = products;\n    return {\n      ...state\n    };\n  } else if (action.type === DISCONTED_PRODUCTS) {\n    filter.discont = action.payload;\n    if (action.payload) {\n      const products = state.data.map(el => {\n        if (el.discont_price != null) {\n          if (el.discont_price >= filter.min && el.discont_price <= filter.max) {\n            el.show_product = true;\n          } else {\n            el.show_product = false;\n          }\n        } else {\n          el.show_product = false;\n        }\n        return el;\n      });\n      state.data = products;\n      return {\n        ...state\n      };\n    } else {\n      const products = state.data.map(el => {\n        if (el.price >= filter.min && el.price <= filter.max) {\n          el.show_product = true;\n        } else {\n          el.show_product = false;\n        }\n        return el;\n      });\n      state.data = products;\n      return {\n        ...state\n      };\n    }\n  } else {\n    return state;\n  }\n};\nexport const singleProductReducer = (state = [], action) => {\n  if (action.type === LOAD_SINGLE_PRODUCT) {\n    return action.payload;\n  } else {\n    return state;\n  }\n};","map":{"version":3,"names":["LOAD_ALL_PRODUCTS_BY_CATEGORY","LOAD_SINGLE_PRODUCT","SORT_PRODUCTS","FILTER_PRODUCTS","DISCONTED_PRODUCTS","loadProductsByCategoryAction","payload","type","loadSingleProductAction","sortByCategoryProductsAction","filterByCategoryProductsAction","discontedByCategoryProductsAction","filter","min","max","Infinity","discont","productsByCategoryReducer","state","action","products","data","map","el","show_product","sort","a","b","title","localeCompare","price","id","min_value","max_value","discont_price","singleProductReducer"],"sources":["/Users/ramansivets/Projects/gardenstore/front/src/reducers/productsByCategoryReducer.js"],"sourcesContent":["const LOAD_ALL_PRODUCTS_BY_CATEGORY = 'LOAD_ALL_PRODUCTS_BY_CATEGORY'\nconst LOAD_SINGLE_PRODUCT = 'LOAD_SINGLE_PRODUCT'\nconst SORT_PRODUCTS = \"SORT_PRODUCTS\"\nconst FILTER_PRODUCTS = \"FILTER_PRODUCTS\"\nconst DISCONTED_PRODUCTS = \"DISCONTED_PRODUCTS\"\n\n\nexport const loadProductsByCategoryAction = payload => ({ type: LOAD_ALL_PRODUCTS_BY_CATEGORY, payload })\nexport const loadSingleProductAction = payload => ({ type: LOAD_SINGLE_PRODUCT, payload })\nexport const sortByCategoryProductsAction = payload => ({type: SORT_PRODUCTS, payload})\nexport const filterByCategoryProductsAction = payload => ({type: FILTER_PRODUCTS, payload})\nexport const discontedByCategoryProductsAction = payload => ({type: DISCONTED_PRODUCTS, payload})\n\nconst filter = { min: 0, max: Infinity, discont: false };\n\nexport const productsByCategoryReducer = (state = {}, action) => {\n    if(action.type === LOAD_ALL_PRODUCTS_BY_CATEGORY){\n      const products = action.payload.data.map((el) => ({...el, show_product: true }))\n      action.payload.data = products;\n      return action.payload;\n    } else if(action.type === SORT_PRODUCTS){\n      if (action.payload === \"title\") {\n        state.data.sort((a, b) => a.title.localeCompare(b.title));\n      } else if (action.payload === \"price_asc\") {\n        state.data.sort((a, b) => a.price - b.price);\n      } else if (action.payload === \"price_desc\") {\n        state.data.sort((a, b) => b.price - a.price);\n      } else if (action.payload === \"default\") {\n        state.data.sort((a, b) => a.id - b.id);\n      }\n      return { ...state };\n\n        }else if(action.type === FILTER_PRODUCTS) {\n            const { min_value, max_value } = action.payload\n            filter.min_value = min_value;\n            filter.max_value = max_value;\n            const products = state.data.map(el => {\n              if (filter.discont) {\n                if (\n                  el.discont_price >= filter.min_value && el.discont_price <= filter.max_value\n                ) {\n                  el.show_product = true;\n                } else {\n                  el.show_product = false;\n                }\n              } else {\n                if (el.price >= min_value && el.price <= max_value) {\n                  el.show_product = true;\n                } else {\n                  el.show_product = false;\n                }\n              }\n              return el;\n            });\n            state.data = products;\n            return { ...state };\n            \n    } else if(action.type === DISCONTED_PRODUCTS){\n      filter.discont = action.payload;\n      if (action.payload) {\n        const products = state.data.map(el => {\n          if (el.discont_price != null) {\n            if (el.discont_price >= filter.min && el.discont_price <= filter.max\n            ) {\n              el.show_product = true;\n            } else {\n              el.show_product = false;\n            }\n          } else {\n            el.show_product = false;\n          }\n          return el;\n        });\n        state.data = products;\n        return { ...state };\n      } else {\n        const products = state.data.map((el) => {\n          if (el.price >= filter.min && el.price <= filter.max) {\n            el.show_product = true;\n          } else {\n            el.show_product = false;\n          }\n          return el;\n        });\n        state.data = products;\n        return { ...state };\n      }\n        } else {\n          return state\n        }\n      }\n\nexport const singleProductReducer = (state = [], action) => {\n    if(action.type === LOAD_SINGLE_PRODUCT){\n        return action.payload\n    } else {\n        return state\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}